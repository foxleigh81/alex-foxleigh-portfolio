language: node_js
node_js:
- 10.15.3
addons:
  apt:
    packages:
    # Ubuntu 16+ does not install this dependency by default, so we need to install it ourselves
    - libgconf-2-4
install:
- yarn global add lerna jest
- lerna bootstrap
- yarn install
matrix:
  include:
  - name: Client Pipeline
    env: PACKAGE_LOCATION=packages/client PACKAGE_NAME=@afp/client
before_script:
  - export NODE_OPTIONS=â€“max_old_space_size=8192
script:
# build AFP deployment
- yarn build
# run the linting drop out on failure
- yarn lint || travis_terminate 1;
# run the tests drop out on failure
- yarn test || travis_terminate 1;
